/*
 Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("scaytcheck",function(e){function t(){return"undefined"!=typeof document.forms["optionsbar_"+c]?document.forms["optionsbar_"+c].options:[]}function n(e,t){if(e){var n=e.length;if(void 0==n)e.checked=e.value==t.toString();else for(var r=0;r<n;r++)e[r].checked=!1,e[r].value==t.toString()&&(e[r].checked=!0)}}function r(e){l.getById("dic_message_"+c).setHtml('<span style="color:red;">'+e+"</span>")}function i(e){l.getById("dic_message_"+c).setHtml('<span style="color:blue;">'+e+"</span>")}function s(e){for(var e=(""+e).split(","),t=0,n=e.length;t<n;t+=1)l.getById(e[t]).$.style.display="inline"}function o(e){for(var e=(""+e).split(","),t=0,n=e.length;t<n;t+=1)l.getById(e[t]).$.style.display="none"}function u(e){l.getById("dic_name_"+c).$.value=e}var a=!0,f,l=CKEDITOR.document,c=e.name,h=CKEDITOR.plugins.scayt.getUiTabs(e),p,d=[],v=0,m=["dic_create_"+c+",dic_restore_"+c,"dic_rename_"+c+",dic_delete_"+c],g=["mixedCase","mixedWithDigits","allCaps","ignoreDomainNames"];p=e.lang.scayt;var y=[{id:"options",label:p.optionsTab,elements:[{type:"html",id:"options",html:'<form name="optionsbar_'+c+'"><div class="inner_options">	<div class="messagebox"></div>	<div style="display:none;">		<input type="checkbox" name="options"  id="allCaps_'+c+'" />		<label for="allCaps" id="label_allCaps_'+c+'"></label>	</div>	<div style="display:none;">		<input name="options" type="checkbox"  id="ignoreDomainNames_'+c+'" />		<label for="ignoreDomainNames" id="label_ignoreDomainNames_'+c+'"></label>	</div>	<div style="display:none;">	<input name="options" type="checkbox"  id="mixedCase_'+c+'" />		<label for="mixedCase" id="label_mixedCase_'+c+'"></label>	</div>	<div style="display:none;">		<input name="options" type="checkbox"  id="mixedWithDigits_'+c+'" />		<label for="mixedWithDigits" id="label_mixedWithDigits_'+c+'"></label>	</div></div></form>'}]},{id:"langs",label:p.languagesTab,elements:[{type:"html",id:"langs",html:'<form name="languagesbar_'+c+'"><div class="inner_langs">	<div class="messagebox"></div>	   <div style="float:left;width:45%;margin-left:5px;" id="scayt_lcol_'+c+'" ></div>   <div style="float:left;width:45%;margin-left:15px;" id="scayt_rcol_'+c+'"></div></div></form>'}]},{id:"dictionaries",label:p.dictionariesTab,elements:[{type:"html",style:"",id:"dictionaries",html:'<form name="dictionarybar_'+c+'"><div class="inner_dictionary" style="text-align:left; white-space:normal; width:320px; overflow: hidden;">	<div style="margin:5px auto; width:80%;white-space:normal; overflow:hidden;" id="dic_message_'+c+'"> </div>	<div style="margin:5px auto; width:80%;white-space:normal;">        <span class="cke_dialog_ui_labeled_label" >Dictionary name</span><br>		<span class="cke_dialog_ui_labeled_content" >			<div class="cke_dialog_ui_input_text">				<input id="dic_name_'+c+'" type="text" class="cke_dialog_ui_input_text"/>		</div></span></div>		<div style="margin:5px auto; width:80%;white-space:normal;">			<a style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_create_'+c+'">				</a>			<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_delete_'+c+'">				</a>			<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_rename_'+c+'">				</a>			<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_restore_'+c+'">				</a>		</div>	<div style="margin:5px auto; width:95%;white-space:normal;" id="dic_info_'+c+'"></div></div></form>'}]},{id:"about",label:p.aboutTab,elements:[{type:"html",id:"about",style:"margin: 5px 5px;",html:'<div id="scayt_about_'+c+'"></div>'}]}],b={title:p.title,minWidth:360,minHeight:220,onShow:function(){var t=this;t.data=e.fire("scaytDialog",{}),t.options=t.data.scayt_control.option(),t.chosed_lang=t.sLang=t.data.scayt_control.sLang;if(!t.data||!t.data.scayt||!t.data.scayt_control)alert("Error loading application service"),t.hide();else{var n=0;a?t.data.scayt.getCaption(e.langCode||"en",function(e){0<n++||(f=e,w.apply(t),E.apply(t),a=!1)}):E.apply(t),t.selectPage(t.data.tab)}},onOk:function(){var e=this.data.scayt_control;e.option(this.options),e.setLang(this.chosed_lang),e.refresh()},onCancel:function(){var e=t(),r;for(r in e)e[r].checked=!1;e="undefined"!=typeof document.forms["languagesbar_"+c]?document.forms["languagesbar_"+c].scayt_lang:[],n(e,"")},contents:d};CKEDITOR.plugins.scayt.getScayt(e);for(p=0;p<h.length;p++)1==h[p]&&(d[d.length]=y[p]);1==h[2]&&(v=1);var w=function(){function e(e){var t=l.getById("dic_name_"+c).getValue();if(!t)return r(" Dictionary name should not be empty. "),!1;try{var n=e.data.getTarget().getParent(),i=/(dic_\w+)_[\w\d]+/.exec(n.getId())[1];b[i].apply(null,[n,t,m])}catch(s){r(" Dictionary error. ")}return!0}var t=this,n=t.data.scayt.getLangList(),a=["dic_create","dic_delete","dic_rename","dic_restore"],p=[],d=[],y;if(v){for(y=0;y<a.length;y++)p[y]=a[y]+"_"+c,l.getById(p[y]).setHtml('<span class="cke_dialog_ui_button">'+f["button_"+a[y]]+"</span>");l.getById("dic_info_"+c).setHtml(f.dic_info)}if(1==h[0])for(y in g)a="label_"+g[y],p=l.getById(a+"_"+c),"undefined"!=typeof p&&"undefined"!=typeof f[a]&&"undefined"!=typeof t.options[g[y]]&&(p.setHtml(f[a]),p.getParent().$.style.display="block");a='<p><img src="'+window.scayt.getAboutInfo().logoURL+'" /></p><p>'+f.version+window.scayt.getAboutInfo().version.toString()+"</p><p>"+f.about_throwt_copy+"</p>",l.getById("scayt_about_"+c).setHtml(a),a=function(e,n){var r=l.createElement("label");r.setAttribute("for","cke_option"+e),r.setHtml(n[e]),t.sLang==e&&(t.chosed_lang=e);var i=l.createElement("div"),s=CKEDITOR.dom.element.createFromHtml('<input id="cke_option'+e+'" type="radio" '+(t.sLang==e?'checked="checked"':"")+' value="'+e+'" name="scayt_lang" />');return s.on("click",function(){this.$.checked=!0,t.chosed_lang=e}),i.append(s),i.append(r),{lang:n[e],code:e,radio:i}};if(1==h[1]){for(y in n.rtl)d[d.length]=a(y,n.ltr);for(y in n.ltr)d[d.length]=a(y,n.ltr);d.sort(function(e,t){return t.lang>e.lang?-1:1}),n=l.getById("scayt_lcol_"+c),a=l.getById("scayt_rcol_"+c);for(y=0;y<d.length;y++)(y<d.length/2?n:a).append(d[y].radio)}var b={dic_create:function(e,t,n){var u=n[0]+","+n[1],a=f.err_dic_create,l=f.succ_dic_create;window.scayt.createUserDictionary(t,function(e){o(u),s(n[1]),l=l.replace("%s",e.dname),i(l)},function(e){a=a.replace("%s",e.dname),r(a+"( "+(e.message||"")+")")})},dic_rename:function(e,t){var n=f.err_dic_rename||"",s=f.succ_dic_rename||"";window.scayt.renameUserDictionary(t,function(e){s=s.replace("%s",e.dname),u(t),i(s)},function(e){n=n.replace("%s",e.dname),u(t),r(n+"( "+(e.message||"")+" )")})},dic_delete:function(e,t,n){var a=n[0]+","+n[1],l=f.err_dic_delete,c=f.succ_dic_delete;window.scayt.deleteUserDictionary(function(e){c=c.replace("%s",e.dname),o(a),s(n[0]),u(""),i(c)},function(e){l=l.replace("%s",e.dname),r(l)})}};b.dic_restore=t.dic_restore||function(e,t,n){var u=n[0]+","+n[1],a=f.err_dic_restore,l=f.succ_dic_restore;window.scayt.restoreUserDictionary(t,function(e){l=l.replace("%s",e.dname),o(u),s(n[1]),i(l)},function(e){a=a.replace("%s",e.dname),r(a)})},d=(m[0]+","+m[1]).split(","),y=0;for(n=d.length;y<n;y+=1)(a=l.getById(d[y]))&&a.on("click",e,this)},E=function(){var e=this;if(1==h[0])for(var r=t(),u=0,f=r.length;u<f;u++){var p=r[u].id,d=l.getById(p);d&&(r[u].checked=!1,1==e.options[p.split("_")[0]]&&(r[u].checked=!0),a)&&d.on("click",function(){e.options[this.getId().split("_")[0]]=this.$.checked?1:0})}1==h[1]&&(r=l.getById("cke_option"+e.sLang),n(r.$,e.sLang)),v&&(window.scayt.getNameUserDictionary(function(e){e=e.dname,o(m[0]+","+m[1]),e?(l.getById("dic_name_"+c).setValue(e),s(m[1])):s(m[0])},function(){l.getById("dic_name_"+c).setValue("")}),i(""))};return b});